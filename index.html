<!doctype html>
<html>
	<head>
		<meta charset="utf-8">
		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">

		<title>IUGW2017</title>

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/iugw.css">

		<!-- Theme used for syntax highlighting of code -->
    <link rel="stylesheet" href="lib/css/github.css">
    <script src="js/jquery.js"></script>
    <script src="js/notify.js"></script>
    <script src="js/clipboard.js"></script>

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>
	</head>
	<body>
		<div class="reveal">
			<div class="slides">
        <section>
          <h3>Before we begin</h3>
          <small><a target="_blank" href="https://github.com/inveniosoftware/iugw2017/tree/master/0-prerequisites">https://github.com/inveniosoftware/iugw2017/tree/master/0-prerequisites</a></small>
          <small>Initialize Vagrant</small>
          <pre><code data-trim=""  data-noescape>
            $ sudo mount /dev/sdb1 /mnt
            $ vagrant box add -n iugw2017-demosite-web /mnt/iugw2017-demositewithcustomdata-web.box
          </code></pre>
          <small>Start Vagrant</small>
          <pre><code data-trim="" contenteditable="">
          $ git clone https://github.com/inveniosoftware/iugw2017
          $ cd iugw2017
          $ vagrant up
          </code></pre>
        </section>
        <section>
          <h4>Login to the vagrant VM</h4>
          <pre><code data-trim=""  contenteditable="" data-noescape>
            $ vagrant destroy
          </code></pre>
          <pre><code data-trim="" contenteditable="" data-noescape>
            # Vagrantfile for IUGW2017.

            Vagrant.configure("2") do |config|

              if Vagrant.has_plugin?("vagrant-cachier")
                config.cache.scope = :box
              end

              config.vm.define "web" do |web|
                <mark>web.vm.box = "iugw2017-demositewithcustomdata-web"</mark>
                ....
                end
              end
            end
        </code></pre>
        <pre><code data-trim=""  data-noescape>
            $ vagrant up
        </code></pre>
      </section>
        <section>
          <h1>IUGW17</h1>
        </section>
        <section>
          <h1>Develop</h1>
          <p>Developer guide</p>
        </section>
        <section>
          <h3>The goal of this tutorial</h3>
          <p>Create module for Invenio v3</p>
          <p>
            <br />
            <a target="_blank" class="call-for-action-clean" href="http://invenio.readthedocs.io/en/iugw2017/developersguide/tutorial/develop.html">
              <small>http://invenio.readthedocs.io/en/iugw2017/developersguide/tutorial/develop.html</small>
            </a>
          </p>
        </section>
        <section>
          <h3>Open the following link</h3>
          <p>
            <br />
            <strong><a target="_blank" class="call-for-action-white" href="https://goo.gl/PrlF08">goo.gl/PrlF08</a></strong>
          </p>
        </section>
				<section>
		          <h2>Bootstrapping with cookiecutter</h2>
		        </section>
		        <section>
		        	<p>Install Cookiecutter</p>
		        	<p>Create a module template:</p>
		        	<pre><code data-trim="" contenteditable="">
		        		$ pip install -U cookiecutter
		        		$ cookiecutter https://github.com/inveniosoftware/cookiecutter-invenio-module.git
		        	</code></pre>
              <button class="copy silver-flat-button" data-clipboard-text='pip install -U cookiecutter; cookiecutter https://github.com/inveniosoftware/cookiecutter-invenio-module.git'>
                Copy to clipboard
              </button>
		        </section>
		        <section>
		        	<p>Fill the form with these values:</p>
		        	<pre><code data-trim="" contenteditable="">
						$ cookiecutter https://github.com/inveniosoftware/cookiecutter-invenio-module.git
						    project_name [Invenio-FunGenerator]: Invenio-Unicorn
						    project_shortname [invenio-unicorn]:
						    package_name [invenio_unicorn]:
						    github_repo [inveniosoftware/invenio-unicorn]:
						    description [Invenio module that adds more fun to the platform.]:
						    author_name [CERN]: Nice Unicorn
						    author_email [info@inveniosoftware.org]: nice@unicorn.com
						    year [2017]:
						    copyright_holder [Nice Unicorn]:
						    copyright_by_intergovernmental [True]: False
						    superproject [Invenio]:
						    transifex_project [invenio-unicorn]:
						    extension_class [InvenioUnicorn]:
						    config_prefix [UNICORN]:
					</code></pre>
		        </section>
		        <section>
		        	<p>This creates a folder <em>invenio-unicorn</em> where you can go</p>
		        </section>
		        <section>
		        	<h2>Install, run and test</h2>
		        </section>
		        <section>
		        	<h2>Install the module</h2>
		        	<pre><code data-trim="" contenteditable="">
		        		$ pip install -e .[all]
		        	</code></pre>
		        	<ul>
		        		<li><code>-e</code> for development (no need to reinstall)</li>
		        		<li><code>.</code> to install the current directory</li>
		        		<li><code>[all]</code> to install all the requirements</li>
		        		<ul><li>equivalent to <code>[docs,tests]</code></li></ul>
		        	</ul>
		        </section>
		        <section>
		        	<h2>Run the tests</h2>
		        	<p>First, initialize a git repo and update the <code>MANIFEST.in</code> file (used during installation)</p>
		        	<pre><code data-trim="" contenteditable="">
						$ git init
						$ git add -A
						$ check-manifest -u
		        	</code></pre>
		        </section>
		        <section>
		        	<h2>Run the tests</h2>
		        	<p>Run the tests and cross fingers</p>
		        	<pre><code data-trim="" contenteditable="">
						$ ./run-tests.sh
		        	</code></pre>
		        </section>
		        <section>
		        	<h2>Run the example app</h2>
		        	<p>First, <code>cd</code> in the <code>examples</code>:</p>
		        	<pre><code data-trim="" contenteditable="">
						$ cd examples
						$ ./app-setup.sh
						$ ./app-fixtures.sh
						$ export FLASK_APP=app.py FLASK_DEBUG=1
						$ flask run
		        	</code></pre>
		        </section>
		        <section>
		        	<h2>Run the example app</h2>
		        	<p>The example is running at <a href="http://192.168.50.10"><code>http://192.168.50.10</code></a></p>
		        	<p>Terminate the server and run this command to clean everything (DON'T FORGET TO DO IT)</p>
					<pre><code data-trim="" contenteditable="">
		        		$ ./app-teardown.sh
		        		$ cd ..
		        	</code></pre>
		        </section>
		        <section>
		        	<h2>Build the documentation</h2>
		        	<p>From the root folder of your module</p>
		        	<pre><code data-trim="" contenteditable="">
		        		$ python setup.py build_sphinx
		        	</code></pre>
		        	<p>Documentation is built into <code>docs/_build/html</code></p>
		        </section>
		        <section>
		        	<h2>Before going further!</h2>
		        	<p>Create an empty GitHub repository...</p>
		        </section>
		        <section>
		        	<h2>Before going further!</h2>
		        	<p>Commit the empty module and create a branch:</p>
		        	<pre><code data-trim="" contenteditable="">
						$ git remote add origin URL OF YOUR GITHUB REPO
						$ git commit -am "first commit"
						$ git push --set-upstream origin master
						$ git checkout -b dev
		        	</code></pre>
		        </section>
			</div>
		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>
			// More info https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				history: true,

				// More info https://github.com/hakimel/reveal.js#dependencies
				dependencies: [
					{ src: 'plugin/markdown/marked.js' },
					{ src: 'plugin/markdown/markdown.js' },
					{ src: 'plugin/notes/notes.js', async: true },
					{ src: 'plugin/highlight/highlight.js', async: true, callback: function() { hljs.initHighlightingOnLoad(); } }
				]
			});
		</script>
    <script>
      // Initialize clipoard
      var clipboard = new Clipboard('.copy');
      clipboard.on('success', function(e) {
        $.notify("Copied", "success");
      });
    </script>
	</body>
</html>
